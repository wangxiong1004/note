{"version":3,"sources":["js/modules/index.js"],"names":["layui","define","exports","jquery","layer","utils","api","srbank","isSrBankInfo","options","load","getAjaxData","url","queryInformation","success","data","console","log","closeAll","code","userData","user","userSRData","isSRbankUser","is_srbank_user","isSRbankBindCard","is_srbank_user_bindcard","isDLBindCardStatus","bankcard_status","isNeedRestPWD","need_reset_pwd_first","isSRbankUserSignAutoBid","is_srbank_user_sign_auto_bid","isSRbankUserSignCreditTransfer","is_srbank_user_sign_credit_transfer","isSRbackUserSignTransfer","is_srbank_user_sign_transfer","isWhetherEvaluation","whether_evaluation","srbankUserCallback","bindCardCallback","resetPWDCallback","validata","whetherEvaluation","whetherEvaluationCallback","signTransfer","signTransferCallback","signCreditTransfer","signCreditTransferCallback","signAutoBid","signAutoBidCallback","msg","srbankLayer","btnText","title","area","alert","html","skin","btn","btnAlign","shade","move","resize","btn2","index","close","layero","callback","openSRBankLayer","behavior","openSRBankLayer02","bindCardLayer","unbindingCardLayer","signLayer","signType","signTit","signHtml","saveCardLayer"],"mappings":"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","file":"index.js","sourcesContent":["layui.define(['jquery', 'layer', 'utils', 'api'], function (exports) {\r\n\t'use strict';\r\n\r\n\tvar $ = layui.jquery;\r\n\tvar layer = layui.layer;\r\n\tvar utils = layui.utils;\r\n\tvar api = layui.api;\r\n\r\n\tvar srbank = {\r\n\t\t/*\r\n\t\t * 上饶存管信息判断\r\n\t\t * {}   object\r\n\t\t * validata： { // 是否验证 object\r\n\t\t *      signAutoBid： true / false 是否需要自动投标签约  boolean\r\n\t\t *      signCreditTransfer: true / false 是否需要自动债转签约 boolean\r\n\t\t *      signTransfer: true / false 否需要申请转让签约 boolean\r\n\t\t *      whetherEvaluation: true/false   是否需要风险评测 boolean\r\n\t\t * }\r\n\t\t * srbankUserCallback: 是否是存管用户回调 function\r\n\t\t * bindCardCallback: 绑卡回调 function\r\n\t\t * resetPWDCallback: 重置密码回调 function\r\n\t\t * signAutoBidCallback: 自动投标签约回调 function\r\n\t\t * signCreditTransferCallback: 自动债转签约回调 function\r\n\t\t * signTransferCallback: 申请转让签约回调 function\r\n\t\t * whetherEvaluation: 风险评测回调 function\r\n\t\t */\r\n\t\tisSrBankInfo: function (options) {\r\n\t\t\tlayer.load(2);\r\n\t\t\tutils.getAjaxData({\r\n\t\t\t\turl: api.queryInformation,\r\n\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\tlayer.closeAll('loading');\r\n\t\t\t\t\tif (data.code === 0) {\r\n\t\t\t\t\t\tvar userData = data.data.user;\r\n\t\t\t\t\t\tvar userSRData = userData.srbank;\r\n\r\n\t\t\t\t\t\tvar isSRbankUser = userSRData.is_srbank_user;\r\n\t\t\t\t\t\tvar isSRbankBindCard = userSRData.is_srbank_user_bindcard;\r\n\t\t\t\t\t\tvar isDLBindCardStatus = userData.bankcard_status;\r\n\t\t\t\t\t\tvar isNeedRestPWD = userSRData.need_reset_pwd_first;\r\n\t\t\t\t\t\tvar isSRbankUserSignAutoBid = userSRData.is_srbank_user_sign_auto_bid;\r\n\t\t\t\t\t\tvar isSRbankUserSignCreditTransfer = userSRData.is_srbank_user_sign_credit_transfer;\r\n\t\t\t\t\t\tvar isSRbackUserSignTransfer = userSRData.is_srbank_user_sign_transfer;\r\n\t\t\t\t\t\tvar isWhetherEvaluation = userData.whether_evaluation;;\r\n\r\n\t\t\t\t\t\tif (!isSRbankUser) { // 是否是存管用户\r\n\r\n\t\t\t\t\t\t\tif (options.srbankUserCallback && typeof options.srbankUserCallback === 'function') {\r\n\t\t\t\t\t\t\t\toptions.srbankUserCallback();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t} else if (!isSRbankBindCard || isDLBindCardStatus === 'UNBIND') { // 老用户是否绑卡\r\n\r\n\t\t\t\t\t\t\tif (options.bindCardCallback && typeof options.bindCardCallback === 'function') {\r\n\t\t\t\t\t\t\t\toptions.bindCardCallback();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t} else if (isNeedRestPWD) { // 是否需要重置密码\r\n\r\n\t\t\t\t\t\t\tif (options.resetPWDCallback && typeof options.resetPWDCallback === 'function') {\r\n\t\t\t\t\t\t\t\toptions.resetPWDCallback();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t} else if (!isSRbankUserSignAutoBid) { // 自动投标签约\r\n\r\n\t\t\t\t\t\t\tif (options.validata.signAutoBid) { // 是否需要自动投标签约\r\n\r\n\t\t\t\t\t\t\t\tif (options.signAutoBidCallback && typeof options.signAutoBidCallback === 'function') {\r\n\t\t\t\t\t\t\t\t\toptions.signAutoBidCallback();\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (!isSRbankUserSignCreditTransfer) { // 自动债转签约\r\n\r\n\t\t\t\t\t\t\tif (options.validata.signCreditTransfer) { // 是否需要自动债转签约\r\n\r\n\t\t\t\t\t\t\t\tif (options.signCreditTransferCallback && typeof options.signCreditTransferCallback === 'function') {\r\n\t\t\t\t\t\t\t\t\toptions.signCreditTransferCallback();\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (!isSRbackUserSignTransfer) { // 申请转让签约\r\n\r\n\t\t\t\t\t\t\tif (options.validata.signTransfer) { // 是否需要申请转让签约\r\n\r\n\t\t\t\t\t\t\t\tif (options.signTransferCallback && typeof options.signTransferCallback === 'function') {\r\n\t\t\t\t\t\t\t\t\toptions.signTransferCallback();\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (!isWhetherEvaluation) { // 是否风险测评\r\n\r\n\t\t\t\t\t\t\tif (options.validata.whetherEvaluation) { // 是否需要风险测评\r\n\r\n\t\t\t\t\t\t\t\tif (options.whetherEvaluationCallback && typeof options.whetherEvaluationCallback === 'function') {\r\n\t\t\t\t\t\t\t\t\toptions.whetherEvaluationCallback();\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlayer.msg(data.msg);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/*\r\n\t\t * 上饶存管提示弹窗\r\n\t\t * {}\r\n\t\t * btnText: 按钮文字   arrary\r\n\t\t * title: 弹窗标题  string\r\n\t\t * area: 弹窗尺寸   arrary\r\n\t\t * skin: 弹窗皮肤--class    string\r\n\t\t * callback: 回调函数   function\r\n\t\t */\r\n\t\tsrbankLayer: function (options) {\r\n\t\t\tvar btnText = options.btnText || ['立即开通'];\r\n\t\t\tvar title = options.title || '提示';\r\n\t\t\tvar area = options.area || ['516px', '300px'];\r\n\r\n\t\t\tlayer.alert(options.html, {\r\n\t\t\t\tskin: options.skin,\r\n\t\t\t\ttitle: title,\r\n\t\t\t\tbtn: btnText,\r\n\t\t\t\tbtnAlign: 'c',\r\n\t\t\t\tarea: area,\r\n\t\t\t\tshade: [0.8, '#000'],\r\n\t\t\t\tmove: false,\r\n\t\t\t\tresize: false,\r\n\t\t\t\tbtn2: function (index) {\r\n\t\t\t\t\tif (options.btn2 && typeof options.btn2 === 'function') {\r\n\t\t\t\t\t\toptions.btn2(index);\r\n                    }\r\n                    layer.close(index);\r\n\t\t\t\t}\r\n\t\t\t}, function (index, layero) {\r\n\t\t\t\tif (options.callback && typeof options.callback === 'function') {\r\n\t\t\t\t\toptions.callback(index, layero);\r\n\t\t\t\t}\r\n\t\t\t\tlayer.close(index);\r\n\t\t\t});\r\n\t\t},\r\n\t\t/*\r\n\t\t * 开通存管账户弹窗\r\n\t\t * behavior: 行为--充值、提现\r\n\t\t */\r\n\t\topenSRBankLayer: function (behavior) {\r\n\t\t\tvar html = '<div class=\"layer__content\">' +\r\n\t\t\t\t'<p class=\"layer__tit\"><i class=\"layer__tip-icon\"></i><span class=\"behavior\">' + behavior + '</span>前请开通银行存管账户</p>' +\r\n\t\t\t\t'<p class=\"layer__text\">银行存管账户用于对用户资金进行独立管理与监督，<br />平台无法触碰，实现平台资金与用户资金隔离。</p>' +\r\n\t\t\t\t'</div>';\r\n\r\n\t\t\tsrbank.srbankLayer({\r\n\t\t\t\thtml: html,\r\n\t\t\t\tskin: 'dl-layer open-srbank-layer'\r\n\t\t\t});\r\n\t\t},\r\n\t\t/*\r\n\t\t * 开通存管提示弹窗02\r\n\t\t */\r\n\t\topenSRBankLayer02: function () {\r\n\t\t\tvar html = '<div class=\"layer__content\">' +\r\n\t\t\t\t'<p class=\"layer__tit\"><i class=\"layer__tip-icon\"></i>您还未开通银行存管账户，请先开通银行存管账户</p>' +\r\n\t\t\t\t'</div>';\r\n\r\n\t\t\tsrbank.srbankLayer({\r\n\t\t\t\thtml: html,\r\n\t\t\t\tskin: 'dl-layer bind-card-layer',\r\n\t\t\t\tarea: ['516px', '280px'],\r\n\t\t\t\tbtnText: '立即开通'\r\n\t\t\t});\r\n\t\t},\r\n\t\t/*\r\n\t\t * 绑卡提示弹窗\r\n\t\t * behavior: 行为--充值、提现\r\n\t\t */\r\n\t\tbindCardLayer: function (behavior) {\r\n\t\t\tvar html = '<div class=\"layer__content\">' +\r\n\t\t\t\t'<p class=\"layer__tit\"><i class=\"layer__tip-icon\"></i>您还未绑定银行卡，请先绑定银行卡后再进行' + behavior + '</p>' +\r\n\t\t\t\t'</div>';\r\n\r\n\t\t\tsrbank.srbankLayer({\r\n\t\t\t\thtml: html,\r\n\t\t\t\tskin: 'dl-layer bind-card-layer',\r\n\t\t\t\tarea: ['516px', '280px'],\r\n\t\t\t\tbtnText: '立即绑卡'\r\n\t\t\t});\r\n\t\t},\r\n\t\t/*\r\n\t\t * 解绑卡申请中弹窗\r\n\t\t */\r\n\t\tunbindingCardLayer: function () {\r\n\t\t\tvar html = '<div class=\"layer__content\">' +\r\n\t\t\t\t'<p class=\"layer__tit clearfix\"><span class=\"icon-wrapper\"><i class=\"layer__tip-icon\"></i></span><span class=\"text\">您正在申请银行卡解绑，期间不支持账户重置交易密码，请在银行卡解绑后绑定新银行卡后进行。</span></p>' +\r\n\t\t\t\t'<p class=\"layer__desc\">审核通过：您可以绑定新的银行卡</p>' +\r\n\t\t\t\t'<p class=\"layer__desc\">审核失败：您需要重新提交审核，或保留原银行卡</p>' +\r\n\t\t\t\t'</div>';\r\n\r\n\t\t\tsrbank.srbankLayer({\r\n\t\t\t\thtml: html,\r\n\t\t\t\tskin: 'dl-layer unbinding-srbank-layer',\r\n\t\t\t\tbtnText: ['知道了']\r\n\t\t\t});\r\n\t\t},\r\n\t\t/*\r\n\t\t * 签约弹窗\r\n\t\t */\r\n\t\tsignLayer: function (signType) {\r\n\t\t\tvar signTit = '';\r\n\t\t\tvar signHtml = '';\r\n\r\n\t\t\tif (signType === 'sign_auto_bid') {\r\n\t\t\t\tsignTit = '开启投资授权协议签约';\r\n\t\t\t\tsignHtml = '<p class=\"text\">您还未开启<a href=\"javascript:;\" >《投资授权协议》</a>中的“自动投标签约”，请先进行签约再进行投资';\r\n\t\t\t} else if (signType === 'sign_credit_transfer') {\r\n\t\t\t\tsignTit = '开启投资授权协议签约';\r\n\t\t\t\tsignHtml = '<p class=\"text\">您还未开启<a href=\"javascript:;\" >《投资授权协议》</a>中的“自动购买债权签约”，请先进行签约再进行投资</p>';\r\n\t\t\t}\r\n\r\n\t\t\tsrbank.srbankLayer({\r\n\t\t\t\thtml: signHtml,\r\n\t\t\t\ttitle: signTit,\r\n\t\t\t\tskin: 'dl-layer sign-srbank-layer',\r\n\t\t\t\tarea: ['516px', '276px'],\r\n\t\t\t\tbtnText: ['开启授权']\r\n\t\t\t});\r\n\t\t},\r\n\t\t/*\r\n\t\t * 银行卡保留提示\r\n\t\t */\r\n\t\tsaveCardLayer: function () {\r\n\t\t\tvar html = '<div class=\"layer__content\">' +\r\n\t\t\t\t'<h3 class=\"layer__tit\">确定要保留原银行卡吗？</h3>' +\r\n\t\t\t\t'<p class=\"layer__desc\">解绑申请正在审核，如果取消解绑申请，平台将会为你保留原来的银行卡，充值及提现等操作会继续使用原来的银行卡。</p>' +\r\n\t\t\t\t'</div>';\r\n\r\n\t\t\tsrbank.srbankLayer({\r\n\t\t\t\thtml: html,\r\n                skin: 'dl-layer save-card-layer',\r\n                title: '温馨提示',\r\n                btnText: ['保留原银行卡', '等待解绑审核'],\r\n                btn2: function(index) {\r\n                    // console.log(index);\r\n                }\r\n\t\t\t});\r\n\t\t},\r\n\t\t/*\r\n\t\t * 银行卡解绑申请成功提示\r\n\t\t */\r\n        \r\n\t}\r\n\r\n\r\n\tsrbank.isSrBankInfo({\r\n\t\tvalidata: {\r\n\t\t\tsignAutoBid: true,\r\n\t\t\tsignCreditTransfer: true,\r\n\t\t\tsignTransfer: true\r\n\t\t},\r\n\t\tsrbankUserCallback: function () {\r\n\t\t\tconsole.log('未开通存管');\r\n\t\t\tsrbank.saveCardLayer();\r\n\t\t\t// srbank.openSRBankLayer('充值');\r\n\t\t},\r\n\t\tbindCardCallback: function () {\r\n\t\t\tconsole.log('未绑卡');\r\n\t\t\tsrbank.bindCardLayer();\r\n\t\t},\r\n\t\tresetPWDCallback: function () {\r\n\t\t\tconsole.log('重置密码');\r\n\t\t},\r\n\t\tsignAutoBidCallback: function () {\r\n\t\t\tconsole.log('是否需要自动投标签约');\r\n\t\t},\r\n\t\tsignCreditTransferCallback: function () {\r\n\t\t\tconsole.log('是否需要自动债转签约');\r\n\t\t},\r\n\t\tsignTransferCallback: function () {\r\n\t\t\tconsole.log('是否需要申请转让?');\r\n\t\t},\r\n\t\twhetherEvaluationCallback: function () {\r\n\t\t\tconsole.log('是否风险测评');\r\n\t\t}\r\n\t});\r\n\r\n\r\n\r\n\texports('index', {\r\n\r\n\t})\r\n});\r\n"]}